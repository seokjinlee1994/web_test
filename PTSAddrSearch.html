<html>
    <head>
    </head>
    <body>
        <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
        <script>
            var getParam = function(key){
                var _parammap = {};
                document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g, function () {
                    function decode(s) {
                        return decodeURIComponent(s.split("+").join(" "));
                    }
 
                    _parammap[decode(arguments[1])] = decode(arguments[2]);
                });
                return _parammap[key];
            };
            new daum.Postcode({
                oncomplete: function(data) {
                    if(getParam("os") == "aos") {
                        alert("aaaa")
                        if(data.userSelectedType=="R"){
                            window.PTSAddrSearch.setAddress(data.zonecode, data.roadAddress, data.buildingName);
                        } else {
                            window.PTSAddrSearch.setAddress(data.zonecode, data.jibunAddress, data.buildingName);
                        }
                    } else if (getParam("os") == "ios") {
                        
                        var address = ""
                        if(data.userSelectedType=="R") {
                            address = data.roadAddress;
                        } else {
                            address = data.jibunAddress;
                        }

                        var postData = {
                            address : address,
                            zoneCode : data.zonecode,
                            buildingName : data.buildingName
                        };
                        
                        window.postMessageToiOS(postData);
                    }
                }, 
                width : '100%',
                height : '100%'
            }).embed();
            
            function postMessageToiOS(postData) {
//                 alert("주소 : " + postData.address + "<br>" + "우편번호 : " + postData.zoneCode + "<br>" + "건물명 : " + postData.buildingName)
                window.webkit.messageHandlers.PTSAddrSearch.postMessage(postData);
            }
        </script>
    </body>
</html>
